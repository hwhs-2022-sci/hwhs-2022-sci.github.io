<!DOCTYPE html>
<html>
<head>
  <title>将绿色替换为红色</title>
  <style>
    #canvas {
      display: block;
      margin: 20px auto;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <input type="color" id="imageUpload">
  <canvas id="canvas"></canvas>
  <input type="color" name="" id="">
<img src="/testData/2023-04-24_06_00_北極.png" alt="">
  <script>
     const image = new Image();
    image.src = "/testData/2023-04-24_06_00_北極.png";

          image.onload = function() {
            const canvas = document.getElementById('canvas');
            canvas.width = image.width;
            canvas.height = image.height;

            const context = canvas.getContext('2d');
            context.drawImage(image, 0, 0);

            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = imageData.data;

            // 处理每个像素
            for (let i = 0; i < pixels.length; i += 4) {
             
              const red = pixels[i];
              const green = pixels[i + 1];
              const blue = pixels[i + 2];
              const alpha = pixels[i + 3];

              // 判断是否为绿色像素
              if (green-25 > red && green-5 > blue) {
                // 替换为红色
                pixels[i] = 255;  // 红色通道
                pixels[i + 1] = 0;  // 绿色通道
                pixels[i + 2] = 0;  // 蓝色通道
                // 不改变透明度
      
              }
                // 判断是否为紅色像素
               if ((red-10 > green && red-10 > blue)||(Math.abs(red-green)-200>blue )) {
                // 替换为红色
                pixels[i] = 255;  // 红色通道
                pixels[i + 1] = 0;  // 绿色通道
                pixels[i + 2] = 0;  // 蓝色通道
                // 不改变透明度
      
              }

              if ((red > 230 && green > 230) && blue<70) {
                // 替换为红色
                pixels[i] = 255;  // 红色通道
                pixels[i + 1] = 0;  // 绿色通道
                pixels[i + 2] = 0;  // 蓝色通道
                // 不改变透明度
      
              }
              if ((red > 170 && green > 170) && blue<155) {
                // 替换为红色
                pixels[i] = 255;  // 红色通道
                pixels[i + 1] = 0;  // 绿色通道
                pixels[i + 2] = 0;  // 蓝色通道
                // 不改变透明度
      
              }

             
            }

            // 将修改后的像素数据放回canvas中
            context.putImageData(imageData, 0, 0);
          }

          


  </script>
</body>
</html>
